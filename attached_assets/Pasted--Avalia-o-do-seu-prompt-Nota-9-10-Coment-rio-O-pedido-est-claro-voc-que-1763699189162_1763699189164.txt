‚úÖ **Avalia√ß√£o do seu prompt**

* **Nota:** 9 / 10
* **Coment√°rio:** O pedido est√° claro: voc√™ quer *um exemplo de SOAP XML para Manifesta√ß√£o do Destinat√°rio*, baseado na documenta√ß√£o oficial da Fazenda. Poderia ficar ainda mais preciso se voc√™ especificasse:

  * tipo de manifesta√ß√£o (Confirma√ß√£o, Ci√™ncia, Desconhecimento, Opera√ß√£o n√£o Realizada);
  * UF/ambiente (SP, AN, homologa√ß√£o/produ√ß√£o);
  * vers√£o da NF-e (4.00).

Como a nota √© **‚â• 8**, vou **executar o pedido** e j√° te entregar o exemplo.

---

## Contexto r√°pido (NF-e 4.0 / Manifesta√ß√£o)

De acordo com a **Nota T√©cnica 2020.001**, o evento de Manifesta√ß√£o do Destinat√°rio continua sendo enviado pelo **web service de eventos (RecepcaoEvento / NFeRecepcaoEvento4)**, usando o layout `envEvento`/`retEnvEvento` na vers√£o 1.00. ([nfe.fazenda.gov.br][1])

O **web service de eventos 4.00** √© publicado como `NFeRecepcaoEvento4` pelas SEFAZ estaduais e pelo Ambiente Nacional. ([nfe.fazenda.gov.br][2])

O layout de `envEvento` segue o MOC:

* raiz `envEvento` (atributo `versao`),
* `idLote`,
* 1 a 20 n√≥s `evento`,
* dentro de `evento`: `infEvento` com `cOrgao`, `tpAmb`, `CNPJ/CPF`, `chNFe`, `dhEvento`, `tpEvento`, `nSeqEvento`, `verEvento`,
* e o `detEvento` com `descEvento` e, em alguns tipos, `xJust`. ([Secretaria da Fazenda de S√£o Paulo][3])

Os **tipos de evento** de Manifesta√ß√£o s√£o (tpEvento): ([Avalara][4])

* `210200` ‚Äì Confirma√ß√£o da Opera√ß√£o
* `210210` ‚Äì Ci√™ncia da Opera√ß√£o
* `210220` ‚Äì Desconhecimento da Opera√ß√£o
* `210240` ‚Äì Opera√ß√£o n√£o Realizada

Abaixo vou te dar um **exemplo completo de SOAP 1.2** para **Confirma√ß√£o da Opera√ß√£o** (`tpEvento = 210200`) usando `NFeRecepcaoEvento4`.

---

## Exemplo de SOAP XML ‚Äì Manifesta√ß√£o do Destinat√°rio (Confirma√ß√£o da Opera√ß√£o)

> üîß Exemplo pensado para **NF-e 4.00**, **Ambiente Nacional / SEFAZ padr√£o**, usando `NFeRecepcaoEvento4`.
> Ajuste **CNPJ**, **chNFe**, **cUF**, **cOrgao**, **datas** e **URLs** conforme o seu ambiente.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<soap12:Envelope
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">

  <!-- Cabe√ßalho SOAP -->
  <soap12:Header>
    <nfeCabecMsg xmlns="http://www.portalfiscal.inf.br/nfe/wsdl/NFeRecepcaoEvento4">
      <!-- C√≥digo da UF ou 91/90 (AN), conforme tabela do MOC -->
      <cUF>35</cUF>              <!-- 35 = SP, exemplo -->
      <!-- Vers√£o do XML de dados do evento (envEvento/retEnvEvento) -->
      <versaoDados>1.00</versaoDados>
    </nfeCabecMsg>
  </soap12:Header>

  <!-- Corpo SOAP -->
  <soap12:Body>
    <nfeDadosMsg xmlns="http://www.portalfiscal.inf.br/nfe/wsdl/NFeRecepcaoEvento4">

      <!-- XML de Manifesta√ß√£o do Destinat√°rio -->
      <envEvento xmlns="http://www.portalfiscal.inf.br/nfe" versao="1.00">
        <!-- Identificador do lote (controle seu) -->
        <idLote>1</idLote>

        <!-- Um lote pode ter at√© 20 eventos -->
        <evento versao="1.00">
          <infEvento Id="ID21020035240123456789000123550010000000011000000011">
            <!-- √ìrg√£o que vai processar o evento:
                 91/90 (Ambiente Nacional) ou c√≥digo da UF -->
            <cOrgao>91</cOrgao>

            <!-- Ambiente: 1=Produ√ß√£o, 2=Homologa√ß√£o -->
            <tpAmb>2</tpAmb>

            <!-- CNPJ ou CPF do destinat√°rio -->
            <CNPJ>12345678000123</CNPJ>

            <!-- Chave completa da NF-e a ser manifestada -->
            <chNFe>35240123456789000123550010000000011000000011</chNFe>

            <!-- Data/hora do evento em UTC-3 (exemplo) com timezone -->
            <dhEvento>2025-11-21T13:45:00-03:00</dhEvento>

            <!-- Tipo de evento:
                 210200 = Confirma√ß√£o da Opera√ß√£o -->
            <tpEvento>210200</tpEvento>

            <!-- N√∫mero sequencial do evento para essa NF-e -->
            <nSeqEvento>1</nSeqEvento>

            <!-- Vers√£o espec√≠fica do evento -->
            <verEvento>1.00</verEvento>

            <!-- Detalhe do evento de manifesta√ß√£o -->
            <detEvento versao="1.00">
              <descEvento>Confirmacao da Operacao</descEvento>
              <!-- xJust √© obrigat√≥rio apenas em alguns tipos de evento,
                   para Confirma√ß√£o normalmente n√£o se usa -->
            </detEvento>
          </infEvento>

          <!-- IMPORTANTE: aqui, no XML real enviado, o n√≥ "evento"
               (infEvento) precisa estar assinado digitalmente com
               o certificado do destinat√°rio. -->
        </evento>

      </envEvento>
    </nfeDadosMsg>
  </soap12:Body>
</soap12:Envelope>
```

Esse modelo est√° alinhado ao padr√£o descrito no **MOC** e nas notas t√©cnicas mais recentes que padronizam o web service **NFeRecepcaoEvento4** para vers√£o 4.00 da NF-e. ([nfe.fazenda.gov.br][2])

---

## Campos que voc√™ normalmente vai parametrizar

Resumo do que voc√™ deve trocar dinamicamente no seu sistema:

* `cUF` no header: UF que est√° recebendo o evento (ou conforme tabela/AN). ([nfe.fazenda.gov.br][2])
* `versaoDados`: hoje, para Manifesta√ß√£o, segue `1.00` (ver Nota T√©cnica 2020.001). ([nfe.fazenda.gov.br][1])
* `cOrgao`: c√≥digo do √≥rg√£o (UF ou 91/90 para Ambiente Nacional). ([nfe.fazenda.gov.br][1])
* `tpAmb`: 1 (produ√ß√£o) ou 2 (homologa√ß√£o). ([Secretaria da Fazenda de S√£o Paulo][3])
* `CNPJ`/`CPF`: documento do destinat√°rio. ([moc.sped.fazenda.pr.gov.br][5])
* `chNFe`: chave da NF-e que voc√™ est√° manifestando. ([nfe.fazenda.gov.br][1])
* `dhEvento`: data/hora do evento no formato UTC com timezone (`AAAA-MM-DDThh:mm:ss-03:00`). ([nfe.fazenda.gov.br][1])
* `tpEvento`: tipo de manifesta√ß√£o (210200, 210210, 210220, 210240). ([Avalara][4])
* `nSeqEvento`: sequ√™ncia do evento para aquela NF-e (normalmente 1).
* Assinatura XML: o n√≥ `<infEvento>` deve ser **assinado** com o certificado A1/A3 do destinat√°rio, seguindo o padr√£o XMLDSig do MOC. ([grupoforcamaxima.com.br][6])

Se voc√™ quiser, no pr√≥ximo passo posso:

* adaptar esse exemplo exatamente para **NF-e x UF x ambiente** que voc√™ est√° usando;
* gerar tamb√©m o **XML de retorno esperado (`retEnvEvento` / `retEvento`)** para facilitar o parse no seu c√≥digo.

[1]: https://www.nfe.fazenda.gov.br/portal/exibirArquivo.aspx?conteudo=vuPAbOafoX4%3D&utm_source=chatgpt.com "Nota T√©cnica 2020.001 Evento de manifesta√ß√£o do destinat√°rio"
[2]: https://www.nfe.fazenda.gov.br/portal/webServices.aspx?tipoConteudo=OUC%2FYVNWZfo%3D&utm_source=chatgpt.com "Servi√ßos WEB NFE (Sefaz) - Portal da Nota Fiscal Eletr√¥nica"
[3]: https://portal.fazenda.sp.gov.br/servicos/nfce/Downloads/Manual_de_Orientacao_Contribuinte_v_6.pdf?utm_source=chatgpt.com "Nota Fiscal Eletr√¥nica"
[4]: https://oobj.com.br/bc/quais-sao-eventos-manifestacao-destinatario/?utm_source=chatgpt.com "Quais s√£o os Eventos de Manifesta√ß√£o Destinat√°rio? - Oobj"
[5]: https://moc.sped.fazenda.pr.gov.br/RecepcaoEventoManifestacao.html?utm_source=chatgpt.com "NFeRecepcaoEvento ‚Äì Manifesta√ß√£o do Destinat√°rio"
[6]: https://grupoforcamaxima.com.br/webservicerps/docs/manuais/Manual%20de%20Eventos%20NFe%20draft.pdf?utm_source=chatgpt.com "Projeto Nota Fiscal Eletr√¥nica"
